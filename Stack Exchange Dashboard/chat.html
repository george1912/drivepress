<!DOCTYPE html>

<meta name="robots" content="noindex">
<html>
<head>
    <meta charset="utf-8">
    <title>Simple chart with C3 - in 5 minutes! </title>

    <!-- Here are all the javascripts and css that you need, you can download them or linked them like here -->
    <!--script src="http://d3js.org/d3.v3.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.js"></script-->
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>




    google.load('visualization', '1', {'packages':['corechart']});
    var finalTime;
    var finalData;
    //var tempTime=['x'];
    //var tempData=['data1'];
    var tempTime=[];
    var tempData=[];




        google.setOnLoadCallback(getQuestionsWithActivity);
        function getItems(type, url) {
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Day');
            data.addColumn('number', 'count');

            //The XMLHttpRequest object is used to exchange data with a server behind the scenes
            var xhr = new XMLHttpRequest();

            //Stores a function (or the name of a function) to be called automatically each time the readyState property changes
            xhr.onreadystatechange = function () {

                //Get the loading status of the current document
                if (xhr.readyState === 4) {
                    //console.log("Type: " + type);
                    //console.log(xhr.response);
                    var response = xhr.response,
                            quotaRemaining = response.quota_remaining;

                    if (response.error_message) {
                        showErrors(response.error_name, response.error_message);
                    }
                    else {
                        var items=response.items;
                        for (var i=0; i<tempTime.length; i++){
                            var count=0;
                            items.forEach(function(item){
                                var jsonTime=getDateTime(item.creation_date*1000);
                                //console.log(jsonTime);
                                if(tempTime[i]==jsonTime){
                                    count=count+1;
                                }
                            });
                            tempData[i]=count;
                            data.addRow([tempTime[i],tempData[i]]) ;
                        }
                        //console.log(tempTime);
                        console.log("first");
                        finalData=[].concat(tempData);
                        //console.log(tempData);
                        finalTime=[].concat(tempTime);
                        console.log("last");
                        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                        chart.draw(data, {displayAnnotations: true});
                    }

                    // Remining requests today from your IP
                    if (quotaRemaining) {
                        //document.querySelector("#remaining-requests").innerHTML = quotaRemaining;
                    }
                }
            };

            //same as xmlhttp.open("GET","ajax_info.txt",true);
            xhr.open("GET", url, true);
            xhr.responseType = "json";
            xhr.send(null);

        }


        function getDateTime(timestamp){
            var a=new Date(timestamp);
            var months = ['01','02','03','04','05','06','07','08','09','10','11','12'];
            var year = a.getFullYear();
            var month = ('0' + (a.getMonth() + 1)).slice(-2);  // Months are zero based. Add leading 0.
            var day = ('0' + a.getDate()).slice(-2);
            //var month = months[a.getMonth()];
            //var day=a.getDate();
            var time=year+"-"+month+"-"+day;

            return time;

        }

        function generateTimeSerial(start,end){


            var date=new Date(start*1000);
            var end=new Date(end*1000);
            while(date<=end){
                tempTime.push(getDateTime(date));
                tempData.push(0);
                date.setTime(date.getTime() + 86400000);
            }

        }

        //getting as a json object
        //plugging in values
        function getQuestionsWithActivity () {
            console.log("start");
            generateTimeSerial("1429056000","1430524800");
            // All questions for a certain time period - http://api.stackexchange.com/docs/search
            //response=getItems("withActivity", "http://api.stackexchange.com/2.2/search?fromdate=" + questions.startDate + "&todate=" + questions.	endDate + "&order=desc&sort=activity&tagged=" + questions.tag + "&site=stackoverflow&filter=!9WA((MBIa");
            getItems("withActivity", "http://api.stackexchange.com/2.2/search?fromdate=1429056000 " + "&todate=1430524800"  + "&order=asc&sort=creation&tagged=twilio" + "&sort=creation"+"&site=stackoverflow&filter=!9WA((MBIa");
        }



        /* var chart = c3.generate({
         data: {
         x: 'x',
         columns: [
         finalTime,
         finalData,
         ]
         },


         axis: {
         x: {
         type: 'timeseries',
         tick: {
         format: '%Y-%m-%d'
         }
         }
         }


         });*/

    /*var chart = c3.generate({
     data: {
     x: 'x',
     //
     columns: [
     ["x", "2015-04-14", "2015-04-15", "2015-04-16", "2015-04-17", "2015-04-18", "2015-04-19", "2015-04-20", "2015-04-21", "2015-04-22", "2015-04-23", "2015-04-24", "2015-04-25", "2015-04-26", "2015-04-27", "2015-04-28", "2015-04-29", "2015-04-30", "2015-05-01"],
     //
     ["data1", 0, 7, 5, 2, 0, 0, 1, 5, 2, 2, 3, 1, 2, 0, 0, 0, 0, 0],

     ]
     },
     axis: {
     x: {
     type: 'timeseries',
     tick: {
     format: '%Y-%m-%d'
     }
     }
     }
     });

     */

    </script>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.css" rel="stylesheet" type="text/css">



</head>
<body>

<div id='chart_div' style='width: 700px; height: 240px;'></div>

<!-- You need an element with an id called "chart" to set a place where your chart will render-->




</body>
</html>