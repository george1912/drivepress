<!DOCTYPE html>

<meta name="robots" content="noindex">
<html>
<head>
    <meta charset="utf-8">
    <title>Simple chart with C3 - in 5 minutes! </title>

    <!-- Here are all the javascripts and css that you need, you can download them or linked them like here -->

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.js"></script>



    <script>



        var finalTime;
        var finalData;
        var tempTime=['x'];
        var tempData=['data1'];

        getQuestionsWithActivity();

        function getItems(type, url) {

            //The XMLHttpRequest object is used to exchange data with a server behind the scenes
            var xhr = new XMLHttpRequest();

            //Stores a function (or the name of a function) to be called automatically each time the readyState property changes
            xhr.onreadystatechange = function () {

                //Get the loading status of the current document
                if (xhr.readyState === 4) {
                    //console.log("Type: " + type);
                    //console.log(xhr.response);
                    var response = xhr.response,
                            quotaRemaining = response.quota_remaining;

                    if (response.error_message) {
                        showErrors(response.error_name, response.error_message);
                    }
                    else {
                        var items=response.items;
                        for (var i=1; i<tempTime.length; i++){
                            var count=0;
                            items.forEach(function(item){
                                var jsonTime=getDateTime(item.creation_date*1000);
                                //console.log(jsonTime);
                                if(tempTime[i]==jsonTime){
                                    count=count+1;
                                }
                            });
                            tempData[i]=count;
                        }
                        //console.log(tempTime);
                        finalData=[].concat(tempData);

                        finalTime=[].concat(tempTime);


                       //chart added here
                        var chart = c3.generate({
                            data: {
                                x: 'x',
                                columns: [
                                    finalTime,
                                    finalData,

                                ]
                            },


                            axis: {
                                x: {
                                    type: 'timeseries',
                                    tick: {
                                        format: '%Y-%m-%d'
                                    }
                                }
                            }


                        })

                    }

                    // Remining requests today from your IP
                    if (quotaRemaining) {
                        //document.querySelector("#remaining-requests").innerHTML = quotaRemaining;
                    }
                }
            };

            //same as xmlhttp.open("GET","ajax_info.txt",true);
            xhr.open("GET", url, true);
            xhr.responseType = "json";
            xhr.send(null);

        }


        function getDateTime(timestamp){
            var a=new Date(timestamp);
            var months = ['01','02','03','04','05','06','07','08','09','10','11','12'];
            var year = a.getFullYear();
            var month = ('0' + (a.getMonth() + 1)).slice(-2);  // Months are zero based. Add leading 0.
            var day = ('0' + a.getDate()).slice(-2);
            //var month = months[a.getMonth()];
            //var day=a.getDate();
            var time=year+"-"+month+"-"+day;

            return time;

        }

        function generateTimeSerial(start,end){


            var date=new Date(start*1000);
            var end=new Date(end*1000);
            while(date<=end){
                tempTime.push(getDateTime(date));
                tempData.push(0);
                date.setTime(date.getTime() + 86400000);
            }

        }

        //getting as a json object
        //plugging in values
        function getQuestionsWithActivity () {
            console.log("start");
            generateTimeSerial("1429056000","1430524800");
            // All questions for a certain time period - http://api.stackexchange.com/docs/search
            //response=getItems("withActivity", "http://api.stackexchange.com/2.2/search?fromdate=" + questions.startDate + "&todate=" + questions.	endDate + "&order=desc&sort=activity&tagged=" + questions.tag + "&site=stackoverflow&filter=!9WA((MBIa");
            getItems("withActivity", "http://api.stackexchange.com/2.2/search?fromdate=1429056000 " + "&todate=1430524800"  + "&order=asc&sort=creation&tagged=twilio" + "&sort=creation"+"&site=stackoverflow&filter=!9WA((MBIa");
        }

        </script>


    <link href="http://cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.css" rel="stylesheet" type="text/css">



</head>
<body>

<div id="chart"></div>

<!-- You need an element with an id called "chart" to set a place where your chart will render-->




</body>
</html>